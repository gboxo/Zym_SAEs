


## Finetuned ZC on DMS data


Given thtat using oracles for sequences that are longer than 425 is really dificult, we will try to get results by using a model finetuned on DMS data that hopefully will generaet sequences that are of similar length as the DMS data. This should make the oracles work better.



### Sanity Checks

Sanity Checks for the FT model.


1) We need to check that the sequences that the model generates are of similar length.
2) We need to check that for a given oracles the generated sequences have plausible activities (that is the distribution should be similar to the DMS data)


**Sequence Lengths**

count     78.000000
mean     424.256410
std        3.401436
min      399.000000
25%      425.000000
50%      425.000000
75%      425.000000
max      427.000000


**Activities**

**Oracle 2**

       prediction1  prediction2  mean_prediction
count    78.000000    78.000000        78.000000
mean      1.549887     1.523912         1.536900
std       0.971367     0.788917         0.867239
min       0.503019     0.485729         0.510395
25%       0.987460     1.003276         0.986991
50%       1.305222     1.286478         1.296822
75%       1.905340     1.896809         1.936649
90%       2.288894     2.409976         2.277864
95%       2.594236     2.766216         2.743354
99%       4.429833     4.041548         4.235690
max       8.296847     5.728742         7.012795


**Prediction MLP Regressor**
       prediction
count   78.000000
mean     1.215183
std      0.818345
min      0.330808
25%      0.842921
50%      0.968832
75%      1.146965
max      6.475057


**DMS Regressor**
       prediction
count   78.000000
mean     1.165889
std      1.118717
min     -0.004490
25%      0.651701
50%      1.002378
75%      1.355663
max      9.119850

# Final Results



**Base Activity**


       prediction1  prediction2  mean_prediction
count   861.000000   861.000000       861.000000
mean      1.408378     1.409436         1.408907
std       0.636749     0.653990         0.638169
min       0.421039     0.441511         0.449115
25%       0.990558     0.975754         0.990090
50%       1.133375     1.123654         1.118843
75%       1.617792     1.675594         1.640117
90%       2.321300     2.332486         2.333596
95%       2.914780     2.802682         2.831758
97%       3.089683     3.129702         3.151752
98%       3.295349     3.464357         3.334703
99%       3.663564     3.708599         3.643103
max       4.413978     5.602410         5.008194


**Feature Ablation**



       prediction1  prediction2  mean_prediction                                          
count   960.000000   960.000000       960.000000                                          
mean      1.423438     1.420340         1.421889                                          
std       0.703409     0.669701         0.677120                                          
min       0.429333     0.510655         0.469994                                          
25%       0.990685     0.984376         0.983785                                          
50%       1.133002     1.123551         1.128235                                          
75%       1.605178     1.682899         1.652029                                          
90%       2.375468     2.337315         2.383577                                          
95%       2.831115     2.855155         2.841958                                          
97%       3.006485     3.196872         3.062231                                          
98%       3.390470     3.451766         3.313386                                          
99%       3.664858     3.759354         3.666238                                          
max       8.648853     5.821926         7.137323    

**Feature Clipping**

count   400.000000   400.000000       400.000000
mean      1.432431     1.426764         1.429598
std       0.875293     0.792062         0.824424
min       0.758462     0.717489         0.740300
25%       0.991060     0.977655         0.987031
50%       1.105722     1.094306         1.100359
75%       1.589246     1.635361         1.573919
90%       2.244079     2.173690         2.188239
95%       2.787946     2.908793         2.910743
97%       3.051551     3.288563         3.218272
98%       3.375992     3.470417         3.299906
99%       3.525577     3.908768         3.603800
max       9.145384     7.296590         8.220987






### Grouped Prediction2 Statistics

#### df3.groupby("name")["prediction2"].describe()

| name                             | count |   mean    |   std    |   min    |   25%    |   50%    |   75%    |   max    |
|-----------------------------------|-------|-----------|----------|----------|----------|----------|----------|----------|
| seq_gen_3.2.1.1_ZC_FT_no_penalty | 861.0 | 1.409436  | 0.653990 | 0.441511 | 0.975754 | 1.123654 | 1.675594 | 5.602410 |

---

#### df2.groupby("name")["prediction2"].describe()

| name                   | count |   mean    |   std    |   min    |   25%    |   50%    |   75%    |   max    |
|------------------------|-------|-----------|----------|----------|----------|----------|----------|----------|
| ablation_feature_10845 |  60.0 | 1.372370  | 0.551694 | 0.792356 | 0.962001 | 1.140171 | 1.657328 | 3.143773 |
| ablation_feature_11096 |  60.0 | 1.394507  | 0.629572 | 0.675495 | 0.980091 | 1.124550 | 1.690523 | 3.516124 |
| ablation_feature_11104 |  60.0 | 1.358711  | 0.487201 | 0.809490 | 0.992349 | 1.153739 | 1.573909 | 2.728182 |
| ablation_feature_12307 |  60.0 | 1.500232  | 0.780706 | 0.701527 | 0.987251 | 1.139161 | 1.710486 | 3.967550 |
| ablation_feature_14912 |  60.0 | 1.334548  | 0.733905 | 0.768023 | 0.962001 | 1.030928 | 1.503373 | 5.491326 |
| ablation_feature_1577  |  60.0 | 1.529946  | 0.883590 | 0.831326 | 0.996705 | 1.106274 | 1.807626 | 5.821926 |
| ablation_feature_1976  |  60.0 | 1.227641  | 0.504506 | 0.804301 | 0.958070 | 1.074226 | 1.283871 | 3.563966 |
| ablation_feature_2502  |  60.0 | 1.381826  | 0.532141 | 0.818362 | 1.011828 | 1.117526 | 1.697811 | 3.049114 |
| ablation_feature_3588  |  60.0 | 1.277078  | 0.478627 | 0.751354 | 0.984376 | 1.055622 | 1.368194 | 3.036797 |
| ablation_feature_3748  |  60.0 | 1.524438  | 0.811638 | 0.510655 | 1.003526 | 1.130386 | 1.911475 | 4.099682 |
| ablation_feature_4503  |  60.0 | 1.544896  | 0.707376 | 0.846664 | 1.038115 | 1.301742 | 1.709458 | 3.673571 |
| ablation_feature_5278  |  60.0 | 1.436571  | 0.681837 | 0.517659 | 1.000675 | 1.150256 | 1.662068 | 3.765712 |
| ablation_feature_5537  |  60.0 | 1.408858  | 0.594701 | 0.857011 | 0.986232 | 1.099077 | 1.757325 | 2.893642 |
| ablation_feature_555   |  60.0 | 1.450276  | 0.759380 | 0.757254 | 0.987689 | 1.103478 | 1.767693 | 4.571090 |
| ablation_feature_7666  |  60.0 | 1.516027  | 0.687152 | 0.930738 | 1.004165 | 1.229879 | 1.721319 | 3.902078 |
| ablation_feature_all   |  60.0 | 1.467521  | 0.704866 | 0.875633 | 0.994839 | 1.101998 | 1.804079 | 3.893331 |

---

#### df.groupby("name")["prediction2"].describe()

| name                   | count |   mean    |   std    |   min    |   25%    |   50%    |   75%    |   max    |
|------------------------|-------|-----------|----------|----------|----------|----------|----------|----------|
| clipping_feature_3024  | 200.0 | 1.521679  | 0.963042 | 0.717489 | 0.982921 | 1.118203 | 1.776956 | 7.296590 |
| clipping_feature_5648  | 200.0 | 1.331850  | 0.558857 | 0.745874 | 0.974963 | 1.071830 | 1.544036 | 3.468934 |





| name                             | count |   mean    |   std    |   min    |   25%    |   50%    |   75%    |   max    |
|-----------------------------------|-------|-----------|----------|----------|----------|----------|----------|----------|
| steering_layer_10_strength_-0.50  |  60.0 | 1.483660  | 0.691961 | 0.693612 | 0.961995 | 1.164673 | 1.773739 | 3.342207 |
| steering_layer_10_strength_-1.00  |  57.0 | 1.163070  | 0.419101 | 0.763815 | 0.961995 | 0.961995 | 1.226252 | 2.877106 |
| steering_layer_10_strength_0.50   |  60.0 | 1.252044  | 0.454327 | 0.731645 | 0.961995 | 1.088051 | 1.439791 | 2.847878 |
| steering_layer_10_strength_1.00   |  60.0 | 1.209710  | 0.749843 | 0.381192 | 0.961995 | 0.961995 | 1.112405 | 6.101621 |
| steering_layer_25_strength_-0.50  |  60.0 | 1.208718  | 0.487532 | 0.475901 | 0.950362 | 1.024204 | 1.263506 | 3.005729 |
| steering_layer_25_strength_-1.00  |  58.0 | 1.279886  | 0.383035 | 0.575533 | 0.962308 | 1.192274 | 1.523688 | 2.721784 |
| steering_layer_25_strength_0.50   |  60.0 | 1.307934  | 0.490757 | 0.876500 | 0.961995 | 1.074580 | 1.365689 | 2.888579 |
| steering_layer_25_strength_1.00   |  54.0 | 1.133902  | 0.375298 | 0.578574 | 0.961995 | 0.961995 | 1.067060 | 2.217993 |
| steering_layer_5_strength_-0.50   |  60.0 | 1.360317  | 0.542697 | 0.459143 | 0.981791 | 1.102928 | 1.644689 | 3.387711 |
| steering_layer_5_strength_-1.00   |  23.0 | 0.842566  | 0.237814 | 0.382562 | 0.687347 | 0.869249 | 1.016743 | 1.181846 |
| steering_layer_5_strength_0.50    |  60.0 | 1.361943  | 0.547258 | 0.760634 | 0.966277 | 1.101070 | 1.665936 | 3.013293 |
| steering_layer_5_strength_1.00    |  60.0 | 1.359583  | 0.461292 | 0.632962 | 0.975927 | 1.206631 | 1.640744 | 2.634313 |
| steering_vector_0                 | 100.0 | 1.353348  | 0.596838 | 0.756237 | 0.963802 | 1.080550 | 1.616647 | 3.335192 |
